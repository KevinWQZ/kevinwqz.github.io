<!DOCTYPE html>
<html>

  
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="baidu-site-verification" content="vuqzu4486i" />
  <meta name="baidu-site-verification" content="yR54QJzaFG" />
  <title>一份传男也传女的 React Native 学习笔记</title>
  <meta name="description" content="">
  <meta name="author" content="xie tao">

<!--   <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="一份传男也传女的 React Native 学习笔记">
  <meta name="twitter:description" content=""> -->
  
<!--   <meta property="og:type" content="article">
  <meta property="og:title" content="一份传男也传女的 React Native 学习笔记">
  <meta property="og:description" content=""> -->
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.ico" />
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2018/05/ReactNativeLearningNotes/">
  <link rel="alternate" type="application/rss+xml" title="wangquanzhen" href="http://localhost:4000/feed.xml">
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?df0994aacf7a4c9779a5632908de3196";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 wangquanzhen 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="wangquanzhen logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="前往 wangquanzhen 的主页" class="blog-button">wangquanzhen</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">探索之旅，学习之路</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">你好，我是王权振！欢迎来到我的个人主页.</br>90后代码搬运工，</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="进入博客" class="blog-button">博客</a></li>
                
                  <li class="navigation__item"><a href="/about/index.html" target="_blank" title="了解更多关于我">关于</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  
  <!-- Weibo -->
  <li class="navigation__item">
  
    <a href="http://weibo.com/u/2803559240" title="xietao3 的微博" target="_blank">
    <!-- <a href="http://weibo.com/xietao3" title="xietao3 的微博" target="_blank"> -->
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/xietao3" title="xietao3 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  
   <!-- CSDN -->
  <li class="navigation__item">
    <a href="http://blog.csdn.net/xietao3" title="xietao3 的 CSDN" target="_blank">
      <img src="/assets/images/csdn.png" width="20" height="20" />
      <!-- <i class='social fa fa-edit'></i> -->
      <span class="label">csdn</span>
    </a>
  </li>
  

  <!-- RSS -->
<!--   <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li> -->

  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-orange"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2018-05-12 21:40:11 +0800" itemprop="datePublished" class="post-meta__date date">2018-05-12</time> &#8226; <span class="post-meta__tags tags"></span>
    </div>
    <h1 class="post-title">一份传男也传女的 React Native 学习笔记</h1>
  </header>

  <section class="post">
    <p><img src="https://user-gold-cdn.xitu.io/2018/5/12/163548005e9308c8?imageView2/1/w/1304/h/734/q/85/interlace/1" alt="图片来自网络" /></p>

<blockquote>
  <p>学习就如同长跑，要想跑的远，就不能跑得太快。</p>
</blockquote>

<h2 id="背景介绍">背景介绍</h2>

<p>这段时间了解了一些前端方面的知识，并且用 React Native 写了一个简易新闻客户端 Demo。</p>

<p>React Native 和原生开发各有所长，具体就不细说。混合使用能充分发挥各自长处，唯一的缺憾就是 React Native 和原生通信过程相对不那么友好。</p>

<p>在这里分享一下学习过程中个人认为比较重要的知识点和学习资料，本文尽量写得轻一些，希望对读者能够有所帮助。</p>

<h2 id="预备知识">预备知识</h2>

<p>有些前端经验的小伙伴学起 React Native 就像老马识途，东西都差不多，变来变去也玩不出什么花样。</p>

<p><a href="http://www.runoob.com/html/html5-intro.html"><strong>HTML5</strong></a>：H5 元素对比 React Native 组件，使用方式如出一辙。</p>

<p><a href="http://www.runoob.com/css/css-tutorial.html"><strong>CSS</strong></a>：React Native 的 FlexBox 用来为组件布局的，和 CSS 亲兄弟关系。</p>

<p><a href="http://www.runoob.com/js/js-tutorial.html"><strong>JavaScript</strong></a>：用 JavaScript 写，能不了解一下吗？ JavaScript 之于 React Native 就如同砖瓦之于摩天大楼。</p>

<p><a href="http://www.runoob.com/react/react-jsx.html"><strong>React JSX</strong></a>：React 使用 JSX 来替代常规的 JavaScript。JSX 是一个看起来很像 XML 的 JavaScript 语法扩展。</p>

<h2 id="一开始学习-react-native">一、开始学习 React Native</h2>

<p><img src="https://user-gold-cdn.xitu.io/2018/5/12/1635481951c0a8df?w=200&amp;h=157&amp;f=jpeg&amp;s=3999" alt="图片来自网络" /></p>

<p>React Native 社区相对比较成熟，中文站的内容也比较全面，从入门到进阶，环境安装到使用指南，学习 React Native 推荐从官网 <a href="https://reactnative.cn">https://reactnative.cn</a> 开始。FlexBox 布局、组件、API 建议在该官网查看，注意网页顶部可以切换 React Native 的历史版本。</p>

<h3 id="11-安装开发环境">1.1 安装开发环境</h3>

<ol>
  <li><a href="https://reactnative.cn/docs/0.51/getting-started.html"> React Native 官网推荐搭建开发环境指南传送门</a>。(记得设置 <code class="highlighter-rouge">App Transport Security Settings</code> ，允许 http 请求)</li>
  <li><a href="https://reactnative.cn/docs/0.51/integration-with-existing-apps.html#content">已建立原生项目，将 React Native 集成到现有原生项目传送门</a></li>
  <li><a href="https://reactnative.cn/docs/0.51/communication-ios.html#content">基于第2点，React Native 与原生混编的情况下，React Native 与原生如何通信传送门</a></li>
  <li>在 IDE 选择这一点上，不要过多纠结，个人使用 <a href="https://www.jetbrains.com/webstorm/">WebStorm</a> ，比较省心。</li>
</ol>

<h3 id="12-生命周期">1.2 生命周期</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Clock extends React.Component {
// 构造函数 通常进行一些初始化操作 如定义 state 初始值
constructor(props) {
super(props);
}

// 组件已挂载
componentDidMount() {}

// 组件即将被卸载
componentWillUnmount() {}

// 渲染函数 
render() {
return (
&lt;View&gt;&lt;/View&gt;
);
}
}
</code></pre></div></div>

<h3 id="13-props-与-state">1.3 Props 与 State</h3>

<p>一个组件所有的数据来自于 Props 与 State ，分布是外部传入的属性和内部状态。</p>

<p><a href="https://reactnative.cn/docs/0.51/props.html#content">Props</a> 是父组件给子组件传递数据用的，Props 由外部传入后无法改变，可以同时传递多个属性。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 父组件 传递一个属性 name 给子组件
&lt;Greeting name='xietao3' /&gt;

// 子组件使用父组件传递下来的属性 name
&lt;Text&gt;Hello {this.props.name}!&lt;/Text&gt;
</code></pre></div></div>

<p><a href="https://reactnative.cn/docs/0.51/state.html#content">State</a> ：用来控制组件内部状态，每次修改都会重新渲染组件。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 初始化 state
constructor(props) {
super(props);
this.state = { showText: 'hello xietao3' };
}

// 使用 state
render() {
// 根据当前showText的值决定显示内容
return (
&lt;Text&gt;{this.state.showText}&lt;/Text&gt;
);
}

// 修改state，触发 render 函数，重新渲染页面
this.setState({showText: 'hello world'});
</code></pre></div></div>

<p><strong>举个栗子(如果理解了就跳过吧)：</strong></p>

<p>我们使用两种数据来控制一个组件：props 和 state。 props 是在父组件中指定，而且一经指定，在被指定的组件的生命周期中则不再改变。 对于需要改变的数据，我们需要使用 state 。</p>

<p>一般来说，你需要在 <code class="highlighter-rouge">constructor</code> 中初始化 state  ，然后在需要修改时调用setState方法。</p>

<p>假如我们需要制作一段不停闪烁的文字。文字内容本身在组件创建时就已经指定好了，所以文字内容应该是一个 prop 。而文字的显示或隐藏的状态（快速的显隐切换就产生了闪烁的效果）则是随着时间变化的，因此这一状态应该写到 state 中。</p>

<h3 id="14-组件与-api">1.4 组件与 API</h3>

<p>说到组件就不得不说 React Native 的组件化思想，尼古拉斯 · 赵四 曾经说过，组合由于继承。简单来说就是多级封装嵌套、组合使用，提高基础组件复用率。</p>

<p><strong>组件怎么用？</strong></p>

<p>授人以鱼不如授人以渔，<a href="https://reactnative.cn/docs/0.51">点击这里打开官方文档</a> ，在左边导航栏中找到你想使用的组件并且点击，里面就有组件的使用方式和属性的详细介绍。</p>

<p><strong>关于 API</strong></p>

<p>建议写第一个 Demo 之前把所以 API 浏览一遍，磨刀不误砍柴工，不一定要会用，但一定要知道这些提供了哪些功能，后面开发中可能会用得上。API 列表同样可以在官网左边导航栏中找到。</p>

<h2 id="二助力-react-native-起飞">二、助力 React Native 起飞</h2>

<p>以下内容不建议在第一个 Demo 中使用：</p>

<h3 id="21-redux">2.1 Redux</h3>

<p>Redux(<a href="http://www.redux.org.cn/">中文教程</a>、<a href="https://redux.js.org/">英文教程</a>) 是 JavaScript 状态容器，提供可预测化的状态管理。</p>

<p>部分推荐教程：</p>

<ul>
  <li>
    <p><a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html">[阮一峰] - Redux 入门教程（一）：基本用法</a></p>
  </li>
  <li>
    <p><a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_two_async_operations.html">[阮一峰] - Redux 入门教程（二）：中间件与异步操作</a></p>
  </li>
  <li>
    <p><a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html">[阮一峰] - React-Redux 的用法</a></p>
  </li>
</ul>

<h3 id="22-codepush">2.2 CodePush</h3>

<p>React Native 热更新的发动机，接入的时候绕了很多圈圈，后面发现接入还挺方便的。CodePush 除了可以使用微软提供的服务进行热更新之外，还可以自建服务器进行热更新。</p>

<p>推荐教程：</p>

<ul>
  <li><a href="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/react-native">CodePush 接入官方文档</a></li>
  <li><a href="https://www.jianshu.com/p/67de8aa052af">微软的React Native热更新 - 使用篇</a></li>
  <li><a href="https://www.jianshu.com/p/6e96c6038d80?from=timeline">react-native-code-push进阶篇</a></li>
</ul>

<h2 id="三-与原生端通信">三、 与原生端通信</h2>

<p>3.1 <a href="https://reactnative.cn/docs/0.51/native-component-ios.html">在 React Native 中使用原生UI组件</a></p>

<p><strong>填坑：</strong></p>
<ul>
  <li>原生端的 Manager 文件如果有 RCT 前缀，在 RN 中引用的时候不要加 RCT。</li>
  <li>原生 UI 组件的 RCTBubblingEventBlock 类型属性命名一定要以 on 开头，例如 onChange。</li>
</ul>

<p>3.2 <a href="https://reactnative.cn/docs/0.51/native-modules-ios.html">在 React Native 中发消息通知给原生端</a>(由于RN调用原生端是异步的，最好在回调中通过通知把消息传递到具体的类)</p>

<p>3.3 <a href="https://reactnative.cn/docs/0.51/native-modules-ios.html#%E7%BB%99javascript%E5%8F%91%E9%80%81%E4%BA%8B%E4%BB%B6">在原生端发消息通知给 React Native </a>(建议在Manager中写一个类方法，这样外部也可以灵活发送通知)</p>

<p>这里其实是有 Demo 的,但是还没整理好🤦️。</p>

<h2 id="四react-native-进阶资源">四、React Native 进阶资源</h2>

<p>有时候一下子看到好多感兴趣的东西，容易分散注意力，在未到达一定水平之前建议不要想太多，入门看官网就足够了。当你掌握了那些知识之后，你就可以拓展一下你的知识库了。</p>

<ul>
  <li><a href="https://github.com/jondot/awesome-react-native">awesome-react-native</a> 19000+⭐️（包含热门文章、信息、第三方库、工具、学习书籍视频等）</li>
  <li><a href="https://github.com/reactnativecn/react-native-guide">react-native-guide</a> 11900+⭐️ （中文 react-native 学习资源、开 源App 和组件）</li>
  <li><a href="https://js.coach/?collection=React+Native">js.coach</a> （第三方库搜索平台）</li>
  <li><a href="https://github.com/ReactNative-xietao3">个人收集的一些开源项目</a>（读万卷书不如行万里路，行万里路不如阅码无数！经常看看别人的代码，总会有新收获的）</li>
</ul>

<h2 id="五react-native-第一个小-demo">五、React Native 第一个小 Demo</h2>

<h3 id="51-monkeynews-简介">5.1 MonkeyNews 简介</h3>

<p><a href="https://github.com/xietao3/MonkeyNews">MonkeyNews</a>，纯 React Native 新闻客户端，部分参考知乎日报，并且使用了其部分接口
由于是练手项目，仅供参考，这里附上 <a href="https://github.com/xietao3/MonkeyNews">GitHub 地址</a>，感兴趣的可以了解(star)一下。</p>

<p><img src="https://user-gold-cdn.xitu.io/2018/5/12/1635454b92c0d9b5?w=224&amp;h=400&amp;f=gif&amp;s=2134947" alt="首页" /></p>

<p><img src="https://user-gold-cdn.xitu.io/2018/5/12/1635455802d88ef1?w=222&amp;h=400&amp;f=gif&amp;s=1423175" alt="频道" /></p>

<p><img src="https://user-gold-cdn.xitu.io/2018/5/12/1635455cca5d7a7d?w=224&amp;h=400&amp;f=gif&amp;s=560627" alt="个人中心" /></p>

<h3 id="52-用到的第三方库">5.2 用到的第三方库：</h3>

<ul>
  <li>react-native-code-push：React Native 热更新</li>
  <li>react-native-swiper：用于轮播图</li>
  <li>react-navigation：TabBar + NavigationBar</li>
</ul>

<h3 id="53-项目结构">5.3 项目结构</h3>

<blockquote>
  <p>Common<br /></p>
  <blockquote>
    <p>MKSwiper.js<br />
MKNewsListItem.js<br />MKImage.js<br />
MKPlaceholderView.js<br />
MKThemeListItem.js<br />
MKLoadingView.js<br />
…<br /></p>
  </blockquote>
</blockquote>

<blockquote>
  <p>Config<br /></p>
  <blockquote>
    <p>MKConstants.js<br /></p>
  </blockquote>
</blockquote>

<blockquote>
  <p>Pages<br /></p>
  <blockquote>
    <p>Home</p>
    <blockquote>
      <p>MKHomePage.js<br />
MKNewsDetailPage.js<br />
Category<br />
MKCategoryPage.js<br />
MKThemeDetailPage.js<br />
UserCenter<br />
MKUserCenterPage.js<br /></p>
    </blockquote>
  </blockquote>
</blockquote>

<blockquote>
  <p>Services</p>
  <blockquote>
    <p>MKServices.js<br />
APIConstants.js</p>
  </blockquote>
</blockquote>

<blockquote>
  <p>Styles</p>
  <blockquote>
    <p>commonStyles.js</p>
  </blockquote>
</blockquote>

<h2 id="六总结">六、总结</h2>

<p>在对 React Native 有了一些了解之后，个人感觉目前 React Native 的状况很难替代原生开发，至少现阶段还不行。</p>

<p><strong>个人认为的缺点</strong>：React Native 的双端运行的优点并不明显，很多原生 API 使用起来都比较麻烦，很大程度上抵消了双端运行带来的开发效率提升，这种情况下我甚至更愿意用原生 iOS 和 Android 各写一套。</p>

<p><strong>优点</strong>：React Native 和原生组合使用，通过动态路由动态在原生页面和 React Native 页面之间切换，可以在原生页面出现 bug 的时候切换至 React Native 页面，或者比较简单的页面直接使用 React Native 开发都是非常不错的。</p>

<p>总之， React Native 也是可以大有作为的。</p>


  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2018/06/Auto-Layout-Techniques-in-Interface-Builder/" title="link to WWDC 2017：高级开发应该掌握的自动布局技巧">WWDC 2017：高级开发应该掌握的自动布局技巧</a></h2>
       <p class="excerpt">  构建 app 时使用的自动布局技术，其实就是建立视图与视图之间关系。而约束是建立视图间关系的纽带，帮助我们的 app 可以适应各种尺寸的屏幕，在应对花样百出的布局需求时游刃有余。本文已收录至 iOS 成长之路3期·WWDC17内参前言如果你以前从未使用过Autolayout，现在网上已经有很多很优秀的教程，包括往届 WWDC 中 sessions 视频资源都可供查看学习。在本文中将不再重复基本的使用方法，更多的去介绍一些更加复杂的场景中的应用，本文中技术结合实例使你更容易理解吸收。让我...&hellip;</p>
       <div class="post-list__meta"><time datetime="2018-06-14 10:40:11 +0800" class="post-list__meta--date date">2018-06-14</time> &#8226; <span class="post-list__meta--tags tags"></span><a class="btn-border-small" href=/2018/06/Auto-Layout-Techniques-in-Interface-Builder/>继续阅读</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2018/01/ScrapySpider/" title="link to Python 萌新 - 花10分钟学爬虫">Python 萌新 - 花10分钟学爬虫</a></h2>
       <p class="excerpt">  Python 新手入门很多时候都会写个爬虫练手，本教程使用 Scrapy 框架，帮你简单快速实现爬虫，并将数据保存至数据库。在机器学习中数据挖掘也是十分重要的，我的数据科学老师曾经说过，好算法不如好数据。介绍Scrapy ，Python 开发的一个快速、高层次的屏幕抓取和 web 抓取框架，用于抓取 web 站点并从页面中提取结构化的数据。文件结构清晰，即使是小白也能够快速上手，总之非常好用😂。XPath ,它是一种用来查找 XML 文档中节点位置的语言。 XPath 基于 XML 的...&hellip;</p>
       <div class="post-list__meta"><time datetime="2018-01-26 23:40:11 +0800" class="post-list__meta--date date">2018-01-26</time> &#8226; <span class="post-list__meta--tags tags"></span><a class="btn-border-small" href=/2018/01/ScrapySpider/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
   
    <div id="gitalk-container"></div>
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

    <script type="text/javascript">
      var gitalk = new Gitalk({
        clientID: 'a7e3bcc8c313f6fcf2cf',
        clientSecret: '1d7f990ff0250384dea6b037ce7d6e455d84d472',
        repo: 'xietao3.github.io',
        owner: 'xietao3',
        admin: ['xietao3'],
        id: 'BlogComment',
        distractionFreeMode: true
      });
      gitalk.render('gitalk-container');

    </script>

  



  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">本站由 <a href="http://xietao3.com/about">xietao3</a> 
        创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2016</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
